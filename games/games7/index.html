<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-8567873693670598"
     crossorigin="anonymous"></script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- Professional SEO Meta Tags -->
    <title>Number Sequence Puzzle - Brain & Logic Games</title>
    <meta name="description" content="Challenge your mind with the best Number Sequence Puzzle. Solve math riddles, find logical patterns, and unlock challenging levels. Free logic game for all ages.">
    <meta name="keywords" content="number sequence puzzle, math riddles, logic games, brain teasers, IQ test, pattern recognition, educational games, sayı dizisi bulmacası, mantık oyunları">
    <meta name="author" content="Gemini Arcade">
    <meta name="robots" content="index, follow">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:title" content="Number Sequence Puzzle - Brain & Logic Games">
    <meta property="og:description" content="Master the patterns and unlock your brain's potential with our logic-based number sequences.">
    <meta property="og:image" content="https://fonts.gstatic.com/s/i/googlematerialicons/psychology/v11/24px.svg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:title" content="Number Sequence Puzzle">
    <meta property="twitter:description" content="Improve your math skills and logic with this engaging sequence puzzle.">

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Plus+Jakarta+Sans:wght@400;600;800&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Plus Jakarta Sans', sans-serif;
            background: #f1f5f9;
            touch-action: manipulation;
            -webkit-tap-highlight-color: transparent;
        }
        .glass {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.3);
        }
        .number-card {
            transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(5px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-fade {
            animation: fadeIn 0.3s ease-out forwards;
        }
        .locked {
            filter: grayscale(1);
            opacity: 0.5;
            cursor: not-allowed !important;
        }
        .modal-backdrop {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(4px);
        }
        /* Hidden scrollbar */
        ::-webkit-scrollbar { display: none; }
        * { -ms-overflow-style: none; scrollbar-width: none; }
    </style>
</head>
<body class="h-screen w-screen flex flex-col items-center justify-center p-2 md:p-4 overflow-hidden">

    <!-- Language, Home & Help Controls -->
    <div class="fixed top-3 right-3 flex gap-2 z-50">
        <!-- Home Button (Goes to ../../index.html) -->
        <a href="../../index.html" class="glass p-2 rounded-xl text-slate-700 hover:bg-white shadow-md active:scale-95 transition-all flex items-center justify-center" id="home-btn" title="Main Menu">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
            </svg>
        </a>
        <button onclick="toggleLanguage()" id="lang-btn" class="glass px-3 py-2 rounded-xl font-bold text-[10px] text-slate-700 hover:bg-white shadow-md active:scale-95 transition-all">
            TR
        </button>
        <button onclick="toggleHelp()" class="glass p-2 rounded-xl text-indigo-600 hover:bg-white shadow-md active:scale-95 transition-all">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
        </button>
    </div>

    <div id="game-container" class="w-full max-w-sm flex flex-col h-full max-h-[620px]">
        <!-- Title Section -->
        <header class="text-center mb-3 shrink-0">
            <h1 id="ui-main-title" class="text-lg md:text-xl font-extrabold text-slate-900 tracking-tight leading-tight">Number Sequence Puzzle</h1>
            <p id="ui-sub-title" class="text-slate-500 text-[9px] font-bold uppercase tracking-[0.2em]">Unlock Levels</p>
        </header>

        <!-- MAIN MENU -->
        <main id="menu-screen" class="glass rounded-[2.5rem] p-4 md:p-5 shadow-2xl animate-fade flex flex-col overflow-hidden grow">
            <h2 id="ui-select-level" class="text-center font-bold text-slate-400 mb-4 uppercase tracking-[0.2em] text-[9px]">Select a Level</h2>
            <div class="grid grid-cols-3 gap-2 overflow-y-auto pr-1" id="levels-grid"></div>
        </main>

        <!-- GAME SCREEN -->
        <section id="game-screen" class="glass rounded-[2.5rem] p-4 md:p-6 shadow-2xl relative overflow-hidden hidden animate-fade flex flex-col grow">
            <!-- Progress Bar -->
            <div class="absolute top-0 left-0 h-1 bg-indigo-600 transition-all duration-700" id="progress-bar" style="width: 0%"></div>

            <nav class="flex justify-between items-center mb-4 shrink-0">
                <button onclick="showMenu()" class="text-[9px] font-black text-slate-400 hover:text-indigo-600 uppercase tracking-widest transition-colors flex items-center gap-1">
                    <svg xmlns="http://www.w3.org/2000/svg" class="h-3 w-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M15 19l-7-7 7-7" /></svg>
                    <span id="ui-back-menu">Menu</span>
                </button>
                <span class="text-[9px] font-black text-indigo-500 uppercase tracking-[0.2em]" id="level-label">LEVEL 1</span>
            </nav>

            <div class="flex flex-col grow justify-between overflow-hidden">
                <!-- Sequence Grid -->
                <div class="grid grid-cols-2 gap-2 mb-2" id="sequence-container"></div>

                <!-- Input & Action Area -->
                <div id="input-container" class="flex flex-col gap-3">
                    <input type="number" id="user-input" placeholder="?" 
                        class="w-full text-center text-4xl font-black py-4 rounded-2xl bg-slate-50 border-2 border-slate-100 focus:border-indigo-500 focus:bg-white focus:outline-none transition-all placeholder:text-slate-200 text-slate-800">
                    <button id="check-btn" 
                        class="w-full bg-slate-900 text-white py-4 rounded-2xl font-bold text-sm hover:bg-indigo-600 active:scale-95 transition-all shadow-lg">
                        Check Answer
                    </button>
                </div>

                <!-- Success State Area -->
                <div id="success-area" class="hidden animate-fade flex flex-col gap-3">
                    <div class="p-4 rounded-2xl border-2 border-emerald-100 bg-emerald-50 text-emerald-800 text-center">
                        <p id="message-text" class="text-sm font-bold mb-1">Congratulations!</p>
                        <p id="rule-text" class="text-[10px] font-medium leading-tight opacity-75"></p>
                    </div>
                    <button id="next-btn" class="w-full bg-indigo-600 text-white py-5 rounded-2xl font-bold text-sm hover:bg-indigo-700 shadow-xl active:scale-95 transition-all">
                        Continue
                    </button>
                </div>
            </div>
        </section>

        <footer class="mt-3 text-center shrink-0">
            <button onclick="resetProgress()" id="ui-reset-btn" class="text-[9px] font-bold text-slate-300 hover:text-rose-400 uppercase tracking-widest transition-colors p-1">
                Reset Progress
            </button>
        </footer>
    </div>

    <!-- HOW TO PLAY MODAL -->
    <div id="help-modal" class="fixed inset-0 z-[100] flex items-center justify-center p-4 hidden">
        <div class="absolute inset-0 modal-backdrop" onclick="toggleHelp()"></div>
        <div class="glass max-w-xs w-full rounded-[2rem] p-6 shadow-2xl relative animate-fade">
            <h3 id="help-title" class="text-lg font-extrabold text-slate-900 mb-3">How to Play?</h3>
            <div id="help-content" class="text-slate-600 text-[11px] space-y-3 leading-snug"></div>
            <button onclick="toggleHelp()" class="w-full mt-5 bg-slate-900 text-white py-3 rounded-xl font-bold text-xs hover:bg-indigo-600 transition-all active:scale-95">
                Got it
            </button>
        </div>
    </div>

    <script>
        const translations = {
            en: {
                mainTitle: "Number Sequence Puzzle",
                subTitle: "Unlock Levels",
                selectLevel: "Select a Level",
                backMenu: "Menu",
                check: "Check Answer",
                correct: "Congratulations!",
                wrong: "Wrong Answer",
                wrongSub: "Try to find the logic again.",
                next: "Next Level",
                finish: "Done / Back to Menu",
                reset: "Reset Progress",
                resetConfirm: "Are you sure? All progress will be lost.",
                level: "Level",
                howToTitle: "How to Play?",
                howToContent: `
                    <p>• Analyze the logic between the numbers displayed.</p>
                    <p>• <b>Goal:</b> Enter the missing number for the question mark (?).</p>
                    <p>• Numbers flow in a <b>side-by-side and downward</b> order.</p>
                    <p>• Solving correctly unlocks the next stage.</p>
                `
            },
            tr: {
                mainTitle: "Sayı Dizisi Bulmacası",
                subTitle: "Kilitleri Aç",
                selectLevel: "Seviye Seçin",
                backMenu: "Menü",
                check: "Kontrol Et",
                correct: "Tebrikler!",
                wrong: "Hatalı",
                wrongSub: "Mantığı tekrar kurmaya çalış.",
                next: "Sonraki Seviye",
                finish: "Bitti / Menüye Dön",
                reset: "İlerlemeyi Sıfırla",
                resetConfirm: "Emin misiniz? Tüm ilerleme silinecek.",
                level: "Seviye",
                howToTitle: "Nasıl Oynanır?",
                howToContent: `
                    <p>• Sayılar arasındaki mantıksal bağı bulmaya çalış.</p>
                    <p>• <b>Amacın:</b> Soru işareti (?) olan yere gelecek sayıyı girmek.</p>
                    <p>• Sayılar <b>sol-sağ ve aşağı</b> yönlü bir akış izler.</p>
                    <p>• Doğru cevap verince bir sonraki kilit açılır.</p>
                `
            }
        };

        const levels = [
            { seq: [1, 4, 13, 40, 121], ans: 364, tr: "Kural: ×3 +1", en: "Rule: ×3 +1" },
            { seq: [2, 6, 15, 31, 56], ans: 92, tr: "Kural: Kare sayılarla artış (+4, +9, +16, +25)", en: "Rule: Increments of square numbers (+4, +9, +16, +25)" },
            { seq: [3, 5, 11, 21, 43], ans: 85, tr: "Kural: ×2 −1 ve ×2 +1 dönüşümlü", en: "Rule: Alternating ×2 −1 and ×2 +1" },
            { seq: [2, 5, 14, 41, 122], ans: 365, tr: "Kural: ×3 −1", en: "Rule: ×3 −1" },
            { seq: [1, 3, 7, 15, 31], ans: 63, tr: "Kural: ×2 +1", en: "Rule: ×2 +1" },
            { seq: [4, 9, 19, 39, 79], ans: 159, tr: "Kural: ×2 +1", en: "Rule: ×2 +1" },
            { seq: [1, 1, 2, 6, 24], ans: 120, tr: "Kural: Artan çarpanlar (1, 2, 3, 4, 5)", en: "Rule: Increasing multipliers (1, 2, 3, 4, 5)" },
            { seq: [10, 9, 12, 11, 14, 13], ans: 16, tr: "Kural: İç içe dizi (+2 artış)", en: "Rule: Interleaved sequence (+2 increase)" },
            { seq: [1, 2, 5, 14, 41], ans: 122, tr: "Kural: ×3 −1", en: "Rule: ×3 −1" }
        ];

        let currentLang = localStorage.getItem('gameLang') || 'en';
        let unlockedCount = parseInt(localStorage.getItem('unlockedLevels')) || 1;
        let currentLevelIndex = 0;

        const menuScreen = document.getElementById('menu-screen');
        const gameScreen = document.getElementById('game-screen');
        const levelsGrid = document.getElementById('levels-grid');
        const sequenceContainer = document.getElementById('sequence-container');
        const userInput = document.getElementById('user-input');
        const inputContainer = document.getElementById('input-container');
        const checkBtn = document.getElementById('check-btn');
        const successArea = document.getElementById('success-area');
        const nextBtn = document.getElementById('next-btn');
        const messageText = document.getElementById('message-text');
        const ruleText = document.getElementById('rule-text');
        const progressBar = document.getElementById('progress-bar');
        const levelLabel = document.getElementById('level-label');

        function updateUILanguage() {
            const t = translations[currentLang];
            document.getElementById('ui-main-title').innerText = t.mainTitle;
            document.getElementById('ui-sub-title').innerText = t.subTitle;
            document.getElementById('ui-select-level').innerText = t.selectLevel;
            document.getElementById('ui-back-menu').innerText = t.backMenu;
            checkBtn.innerText = t.check;
            document.getElementById('ui-reset-btn').innerText = t.reset;
            document.getElementById('help-title').innerText = t.howToTitle;
            document.getElementById('help-content').innerHTML = t.howToContent;
            document.getElementById('lang-btn').innerText = currentLang === 'en' ? 'TR' : 'EN';
            
            if (gameScreen.classList.contains('hidden')) renderMenu();
            else levelLabel.innerText = `${t.level.toUpperCase()} ${currentLevelIndex + 1}`;
        }

        function toggleLanguage() {
            currentLang = currentLang === 'en' ? 'tr' : 'en';
            localStorage.setItem('gameLang', currentLang);
            updateUILanguage();
        }

        function toggleHelp() {
            document.getElementById('help-modal').classList.toggle('hidden');
        }

        function renderMenu() {
            levelsGrid.innerHTML = '';
            const t = translations[currentLang];
            levels.forEach((_, index) => {
                const isLocked = index + 1 > unlockedCount;
                const btn = document.createElement('button');
                btn.className = `h-16 md:h-20 rounded-2xl flex flex-col items-center justify-center font-bold transition-all shadow-sm active:scale-95 ${
                    isLocked 
                    ? 'bg-slate-100 text-slate-400 locked' 
                    : 'bg-white text-slate-800 border-2 border-slate-50 hover:border-indigo-200'
                }`;
                
                if (isLocked) {
                    btn.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" viewBox="0 0 20 20" fill="currentColor"><path d="M10 2a5 5 0 00-5 5v2a2 2 0 00-2 2v5a2 2 0 002 2h10a2 2 0 002-2v-5a2 2 0 00-2-2V7a5 5 0 00-5-5zM7 7a3 3 0 016 0v2H7V7z"/></svg>`;
                } else {
                    btn.innerHTML = `<span class="text-indigo-600 text-[8px] mb-0.5">${t.level}</span><span class="text-lg">${index + 1}</span>`;
                    btn.onclick = () => startLevel(index);
                }
                levelsGrid.appendChild(btn);
            });
        }

        function showMenu() {
            gameScreen.classList.add('hidden');
            menuScreen.classList.remove('hidden');
            renderMenu();
        }

        function startLevel(index) {
            currentLevelIndex = index;
            menuScreen.classList.add('hidden');
            gameScreen.classList.remove('hidden');
            loadLevel();
        }

        function loadLevel() {
            const level = levels[currentLevelIndex];
            const t = translations[currentLang];
            levelLabel.innerText = `${t.level.toUpperCase()} ${currentLevelIndex + 1}`;
            progressBar.style.width = `${((currentLevelIndex + 1) / levels.length) * 100}%`;
            
            sequenceContainer.innerHTML = '';
            level.seq.forEach((num, idx) => {
                const div = document.createElement('div');
                div.className = 'number-card h-12 md:h-14 bg-white border-2 border-slate-50 rounded-xl flex items-center justify-center font-extrabold text-sm md:text-xl text-slate-800 shadow-sm animate-fade';
                div.innerText = num;
                div.style.animationDelay = `${idx * 0.05}s`;
                sequenceContainer.appendChild(div);
            });

            const qDiv = document.createElement('div');
            qDiv.className = 'number-card h-12 md:h-14 bg-indigo-50 border-2 border-indigo-100 border-dashed rounded-xl flex items-center justify-center font-black text-xl text-indigo-600';
            qDiv.innerText = '?';
            sequenceContainer.appendChild(qDiv);

            userInput.value = '';
            userInput.disabled = false;
            inputContainer.classList.remove('hidden');
            successArea.classList.add('hidden');
            
            setTimeout(() => userInput.focus(), 300);
        }

        function checkAnswer() {
            const level = levels[currentLevelIndex];
            const guess = parseInt(userInput.value);
            const t = translations[currentLang];

            if (isNaN(guess)) return;
            
            if (guess === level.ans) {
                if (currentLevelIndex + 1 === unlockedCount && unlockedCount < levels.length) {
                    unlockedCount++;
                    localStorage.setItem('unlockedLevels', unlockedCount);
                }
                
                inputContainer.classList.add('hidden');
                successArea.classList.remove('hidden');
                
                messageText.innerText = t.correct;
                ruleText.innerText = currentLang === 'tr' ? level.tr : level.en;
                nextBtn.innerText = currentLevelIndex === levels.length - 1 ? t.finish : t.next;
            } else {
                userInput.classList.add('ring-4', 'ring-rose-200', 'border-rose-400');
                setTimeout(() => userInput.classList.remove('ring-4', 'ring-rose-200', 'border-rose-400'), 500);
            }
        }

        function resetProgress() {
            if (confirm(translations[currentLang].resetConfirm)) {
                unlockedCount = 1;
                localStorage.setItem('unlockedLevels', 1);
                showMenu();
            }
        }

        checkBtn.addEventListener('click', checkAnswer);
        nextBtn.addEventListener('click', () => {
            if (currentLevelIndex === levels.length - 1) {
                showMenu();
            } else {
                currentLevelIndex++;
                loadLevel();
            }
        });

        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                if (!inputContainer.classList.contains('hidden')) {
                    checkAnswer();
                } else {
                    nextBtn.click();
                }
            }
        });

        window.onload = updateUILanguage;
    </script>
</body>

</html>
